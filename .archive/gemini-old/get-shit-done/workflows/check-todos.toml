prompt = "<purpose>\nList pending todos, allow selection, load context, and route to action.\n\nEnables reviewing captured ideas and deciding what to work on next.\n</purpose>\n\n<process>\n\n## Step 1: Check Existence\n\n```bash\nTODO_COUNT=$(ls .planning/todos/pending/*.md 2>/dev/null | wc -l | tr -d ' ')\n```\n\nIf 0:\n```\nNo pending todos.\n\nTodos are captured during work sessions with /gsd:add-todo.\n\nWould you like to:\n1. Continue with current phase (/gsd:progress)\n2. Add a todo now (/gsd:add-todo)\n```\nExit.\n\n## Step 2: Parse Filter\n\nCheck for area filter in arguments:\n- `/gsd:check-todos` → show all\n- `/gsd:check-todos api` → filter to area:api\n\n## Step 3: List Todos\n\n```bash\nfor file in .planning/todos/pending/*.md; do\n  created=$(grep \"^created:\" \"$file\" | cut -d' ' -f2)\n  title=$(grep \"^title:\" \"$file\" | cut -d':' -f2- | xargs)\n  area=$(grep \"^area:\" \"$file\" | cut -d' ' -f2)\n  echo \"$created|$title|$area|$file\"\ndone | sort\n```\n\nDisplay:\n```\nPending Todos:\n\n1. Add auth token refresh (api, 2d ago)\n2. Fix modal z-index issue (ui, 1d ago)\n3. Refactor database pool (database, 5h ago)\n\nReply with a number, or `q` to exit\n```\n\n## Step 4: Handle Selection\n\nWait for number. If invalid, reprompt.\n\n## Step 5: Load Context\n\nRead todo file. Display:\n```\n## [title]\n\n**Area:** [area]\n**Created:** [date]\n**Files:** [list]\n\n### Problem\n[content]\n\n### Solution\n[content]\n```\n\nIf files listed, summarize each.\n\n## Step 6: Check Roadmap\n\nIf todo's area matches an upcoming phase, note for action options.\n\n## Step 7: Offer Actions\n\n**If matches roadmap phase:**\n- \"Work on it now\"\n- \"Add to phase plan\"\n- \"Brainstorm approach\"\n- \"Put it back\"\n\n**If no match:**\n- \"Work on it now\"\n- \"Create a phase\"\n- \"Brainstorm approach\"\n- \"Put it back\"\n\n## Step 8: Execute Action\n\n**Work on it now:**\n```bash\nmv \".planning/todos/pending/[file]\" \".planning/todos/done/\"\n```\nUpdate STATE.md. Begin work.\n\n**Add to phase plan / Create a phase / Brainstorm:** Keep in pending, route appropriately.\n\n**Put it back:** Return to list.\n\n## Step 9: Commit\n\n@./.gemini/get-shit-done/references/git-planning-commit.md\n\nIf todo moved:\n```bash\ngit add .planning/todos/done/[file]\ngit commit -m \"docs: start work on todo - [title]\"\n```\n\n</process>\n"
