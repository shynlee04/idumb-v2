prompt = "<purpose>\nRemove an unstarted future phase from the roadmap and renumber all subsequent phases.\n\nPurpose: Clean removal of work decided not to do, without polluting context with cancelled markers.\nOutput: Phase deleted, subsequent phases renumbered, git commit as historical record.\n</purpose>\n\n<process>\n\n## Step 1: Parse Arguments\n\n@./.gemini/get-shit-done/references/phase-argument-parsing.md\n\nPhase number required. Error if not provided:\n```\nERROR: Phase number required\nUsage: /gsd:remove-phase <phase-number>\n```\n\n## Step 2: Load State\n\n```bash\ncat .planning/STATE.md\ncat .planning/ROADMAP.md\n```\n\nParse current phase from STATE.md.\n\n## Step 3: Validate Phase Exists\n\nSearch for `### Phase {target}:` heading.\n\nIf not found:\n```\nERROR: Phase {target} not found in roadmap\nAvailable phases: [list]\n```\n\n## Step 4: Validate Future Phase\n\nTarget must be > current phase number.\n\nIf target <= current:\n```\nERROR: Cannot remove Phase {target}\n\nOnly future phases can be removed:\n- Current phase: {current}\n- Phase {target} is current or completed\n\nTo abandon current work, use /gsd:pause-work instead.\n```\n\nCheck for SUMMARY.md files:\n```bash\nls .planning/phases/{target}-*/*-SUMMARY.md 2>/dev/null\n```\n\nIf any exist:\n```\nERROR: Phase {target} has completed work\nCannot remove phases with completed work.\n```\n\n## Step 5: Gather Phase Info\n\nExtract phase name from heading.\nFind phase directory.\nFind all subsequent phases needing renumbering.\n\n**Subsequent phase detection:**\n- For integer removal (17): Find phases > 17, decimals 17.x → 16.x\n- For decimal removal (17.1): Find decimals > 17.1 within same integer\n\n## Step 6: Confirm Removal\n\n```\nRemoving Phase {target}: {Name}\n\nThis will:\n- Delete: .planning/phases/{target}-{slug}/\n- Renumber {N} subsequent phases:\n  - Phase 18 → Phase 17\n  - Phase 19 → Phase 18\n\nProceed? (y/n)\n```\n\n## Step 7: Delete Phase Directory\n\n```bash\nif [ -d \".planning/phases/{target}-{slug}\" ]; then\n  rm -rf \".planning/phases/{target}-{slug}\"\nfi\n```\n\n## Step 8: Renumber Directories\n\nProcess in descending order to avoid overwrites:\n```bash\nmv \".planning/phases/20-name\" \".planning/phases/19-name\"\nmv \".planning/phases/19-name\" \".planning/phases/18-name\"\nmv \".planning/phases/18-name\" \".planning/phases/17-name\"\n```\n\nHandle decimal directories:\n- `17.1-fix-bug` → `16.1-fix-bug` (if removing integer 17)\n- `17.2-hotfix` → `17.1-hotfix` (if removing decimal 17.1)\n\n## Step 9: Rename Files in Directories\n\nInside each renumbered directory:\n```bash\nmv \"18-01-PLAN.md\" \"17-01-PLAN.md\"\nmv \"18-02-PLAN.md\" \"17-02-PLAN.md\"\n```\n\n## Step 10: Update ROADMAP.md\n\n1. Remove the phase section entirely\n2. Remove from phase list\n3. Remove from Progress table\n4. Renumber all subsequent phases in headings, lists, tables\n5. Update dependency references\n\n## Step 11: Update STATE.md\n\nUpdate total phase count and progress percentage.\nDo NOT add \"Roadmap Evolution\" note — git commit is the record.\n\n## Step 12: Update File Contents\n\nSearch for and update internal phase references:\n```bash\ngrep -r \"Phase 18\" .planning/phases/17-*/\n```\n\n## Step 13: Commit\n\n@./.gemini/get-shit-done/references/git-planning-commit.md\n\nIf committing:\n```bash\ngit add .planning/\ngit commit -m \"chore: remove phase {target} ({original-name})\"\n```\n\n## Step 14: Completion\n\n```\nPhase {target} ({name}) removed.\n\nChanges:\n- Deleted: .planning/phases/{target}-{slug}/\n- Renumbered: Phases {X}-{Y} → {X-1}-{Y-1}\n- Updated: ROADMAP.md, STATE.md\n- Committed: chore: remove phase {target}\n\nCurrent roadmap: {total} phases\nCurrent position: Phase {current} of {new-total}\n\n---\n\n## What's Next\n\n- /gsd:progress — see updated status\n- Continue with current phase\n```\n\n</process>\n\n<anti_patterns>\n- Don't remove completed phases (have SUMMARY.md)\n- Don't remove current or past phases\n- Don't leave gaps in numbering\n- Don't add \"removed phase\" notes to STATE.md\n- Don't modify completed phase directories\n</anti_patterns>\n"
