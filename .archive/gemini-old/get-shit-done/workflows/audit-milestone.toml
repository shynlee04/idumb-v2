prompt = "<purpose>\nVerify milestone achieved its definition of done.\n\nReads existing VERIFICATION.md files (phases already verified during execute-phase), aggregates tech debt and deferred gaps, spawns integration checker for cross-phase wiring.\n</purpose>\n\n<process>\n\n## Step 0: Resolve Model Profile\n\n@./.gemini/get-shit-done/references/model-profile-resolution.md\n\nResolve model for:\n- `gsd-integration-checker`\n\n## Step 1: Determine Milestone Scope\n\n```bash\nls -d .planning/phases/*/ | sort -V\n```\n\n- Parse version from arguments or detect from ROADMAP.md\n- Identify all phase directories in scope\n- Extract milestone definition of done\n- Extract requirements mapped to this milestone\n\n## Step 2: Read All Phase Verifications\n\nFor each phase directory:\n```bash\ncat .planning/phases/01-*/*-VERIFICATION.md\ncat .planning/phases/02-*/*-VERIFICATION.md\n```\n\nExtract from each:\n- Status: passed | gaps_found\n- Critical gaps (blockers)\n- Non-critical gaps (tech debt, deferred)\n- Anti-patterns (TODOs, stubs, placeholders)\n- Requirements coverage\n\nFlag unverified phases as blockers.\n\n## Step 3: Spawn Integration Checker\n\n```\nTask(\n  prompt=\"Check cross-phase integration and E2E flows.\n\nPhases: {phase_dirs}\nPhase exports: {from SUMMARYs}\nAPI routes: {routes created}\n\nVerify cross-phase wiring and E2E user flows.\",\n  subagent_type=\"gsd-integration-checker\",\n  model=\"{integration_checker_model}\"\n)\n```\n\n## Step 4: Collect Results\n\nCombine:\n- Phase-level gaps and tech debt\n- Integration checker report (wiring gaps, broken flows)\n\n## Step 5: Check Requirements Coverage\n\nFor each requirement:\n- Find owning phase\n- Check phase verification status\n- Determine: satisfied | partial | unsatisfied\n\n## Step 6: Write Audit Report\n\nCreate `.planning/v{version}-MILESTONE-AUDIT.md`:\n\n```yaml\n---\nmilestone: {version}\naudited: {timestamp}\nstatus: passed | gaps_found | tech_debt\nscores:\n  requirements: N/M\n  phases: N/M\n  integration: N/M\n  flows: N/M\ngaps:\n  requirements: [...]\n  integration: [...]\n  flows: [...]\ntech_debt:\n  - phase: 01-auth\n    items: [...]\n---\n```\n\n## Step 7: Present Results\n\nRoute by status:\n\n**If passed:**\n```\n## ✓ Milestone {version} — Audit Passed\n\n/gsd:complete-milestone {version}\n```\n\n**If gaps_found:**\n```\n## ⚠ Milestone {version} — Gaps Found\n\n/gsd:plan-milestone-gaps\n```\n\n**If tech_debt:**\n```\n## ⚡ Milestone {version} — Tech Debt Review\n\nOptions:\nA. /gsd:complete-milestone — accept debt\nB. /gsd:plan-milestone-gaps — address debt first\n```\n\n</process>\n"
