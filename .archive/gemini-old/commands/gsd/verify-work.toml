description = "Validate built features through conversational UAT"
prompt = "<objective>\nValidate built features through conversational testing with persistent state.\n\nPurpose: Confirm what Claude built actually works from user's perspective. One test at a time, plain text responses, no interrogation. When issues are found, automatically diagnose, plan fixes, and prepare for execution.\n\nOutput: {phase}-UAT.md tracking all test results. If issues found: diagnosed gaps, verified fix plans ready for /gsd:execute-phase\n</objective>\n\n<execution_context>\n@./.gemini/get-shit-done/workflows/verify-work.md\n@./.gemini/get-shit-done/templates/UAT.md\n</execution_context>\n\n<context>\nPhase: $ARGUMENTS (optional)\n- If provided: Test specific phase (e.g., \"4\")\n- If not provided: Check for active sessions or prompt for phase\n\n@.planning/STATE.md\n@.planning/ROADMAP.md\n</context>\n\n<process>\n1. Check for active UAT sessions (resume or start new)\n2. Find SUMMARY.md files for the phase\n3. Extract testable deliverables (user-observable outcomes)\n4. Create {phase}-UAT.md with test list\n5. Present tests one at a time:\n   - Show expected behavior\n   - Wait for plain text response\n   - \"yes/y/next\" = pass, anything else = issue (severity inferred)\n6. Update UAT.md after each response\n7. On completion: commit, present summary\n8. If issues found:\n   - Spawn parallel debug agents to diagnose root causes\n   - Spawn gsd-planner in --gaps mode to create fix plans\n   - Spawn gsd-plan-checker to verify fix plans\n   - Iterate planner ↔ checker until plans pass (max 3)\n   - Present ready status with `/clear` then `/gsd:execute-phase`\n</process>\n\n<anti_patterns>\n- Don't use AskUserQuestion for test responses — plain text conversation\n- Don't ask severity — infer from description\n- Don't present full checklist upfront — one test at a time\n- Don't run automated tests — this is manual user validation\n- Don't fix issues during testing — log as gaps, diagnose after all tests complete\n</anti_patterns>\n\n<offer_next>\nOutput this markdown directly (not as a code block). Route based on UAT results:\n\n| Status | Route |\n|--------|-------|\n| All tests pass + more phases | Route A (next phase) |\n| All tests pass + last phase | Route B (milestone complete) |\n| Issues found + fix plans ready | Route C (execute fixes) |\n| Issues found + planning blocked | Route D (manual intervention) |\n\n---\n\n**Route A: All tests pass, more phases remain**\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n GSD ► PHASE {Z} VERIFIED ✓\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n**Phase {Z}: {Name}**\n\n{N}/{N} tests passed\nUAT complete ✓\n\n───────────────────────────────────────────────────────────────\n\n## ▶ Next Up\n\n**Phase {Z+1}: {Name}** — {Goal from ROADMAP.md}\n\n/gsd:discuss-phase {Z+1} — gather context and clarify approach\n\n*(/clear first → fresh context window)*\n\n───────────────────────────────────────────────────────────────\n\n**Also available:**\n- /gsd:plan-phase {Z+1} — skip discussion, plan directly\n- /gsd:execute-phase {Z+1} — skip to execution (if already planned)\n\n───────────────────────────────────────────────────────────────\n\n---\n\n**Route B: All tests pass, milestone complete**\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n GSD ► PHASE {Z} VERIFIED ✓\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n**Phase {Z}: {Name}**\n\n{N}/{N} tests passed\nFinal phase verified ✓\n\n───────────────────────────────────────────────────────────────\n\n## ▶ Next Up\n\n**Audit milestone** — verify requirements, cross-phase integration, E2E flows\n\n/gsd:audit-milestone\n\n*(/clear first → fresh context window)*\n\n───────────────────────────────────────────────────────────────\n\n**Also available:**\n- /gsd:complete-milestone — skip audit, archive directly\n\n───────────────────────────────────────────────────────────────\n\n---\n\n**Route C: Issues found, fix plans ready**\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n GSD ► PHASE {Z} ISSUES FOUND ⚠\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n**Phase {Z}: {Name}**\n\n{N}/{M} tests passed\n{X} issues diagnosed\nFix plans verified ✓\n\n### Issues Found\n\n{List issues with severity from UAT.md}\n\n───────────────────────────────────────────────────────────────\n\n## ▶ Next Up\n\n**Execute fix plans** — run diagnosed fixes\n\n/gsd:execute-phase {Z} --gaps-only\n\n*(/clear first → fresh context window)*\n\n───────────────────────────────────────────────────────────────\n\n**Also available:**\n- cat .planning/phases/{phase_dir}/*-PLAN.md — review fix plans\n- /gsd:plan-phase {Z} --gaps — regenerate fix plans\n\n───────────────────────────────────────────────────────────────\n\n---\n\n**Route D: Issues found, planning blocked**\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n GSD ► PHASE {Z} BLOCKED ✗\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n**Phase {Z}: {Name}**\n\n{N}/{M} tests passed\nFix planning blocked after {X} iterations\n\n### Unresolved Issues\n\n{List blocking issues from planner/checker output}\n\n───────────────────────────────────────────────────────────────\n\n## ▶ Next Up\n\n**Manual intervention required**\n\nReview the issues above and either:\n1. Provide guidance for fix planning\n2. Manually address blockers\n3. Accept current state and continue\n\n───────────────────────────────────────────────────────────────\n\n**Options:**\n- /gsd:plan-phase {Z} --gaps — retry fix planning with guidance\n- /gsd:discuss-phase {Z} — gather more context before replanning\n\n───────────────────────────────────────────────────────────────\n</offer_next>\n\n<success_criteria>\n- [ ] UAT.md created with tests from SUMMARY.md\n- [ ] Tests presented one at a time with expected behavior\n- [ ] Plain text responses (no structured forms)\n- [ ] Severity inferred, never asked\n- [ ] Batched writes: on issue, every 5 passes, or completion\n- [ ] Committed on completion\n- [ ] If issues: parallel debug agents diagnose root causes\n- [ ] If issues: gsd-planner creates fix plans from diagnosed gaps\n- [ ] If issues: gsd-plan-checker verifies fix plans (max 3 iterations)\n- [ ] Ready for `/gsd:execute-phase` when complete\n</success_criteria>"
