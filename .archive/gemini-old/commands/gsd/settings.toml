description = "Configure GSD workflow toggles and model profile"
prompt = "<objective>\nAllow users to toggle workflow agents on/off and select model profile via interactive settings.\n\nUpdates `.planning/config.json` with workflow preferences and model profile selection.\n</objective>\n\n<process>\n\n## 1. Ensure config exists\n\n```bash\nls .planning/config.json 2>/dev/null\n```\n\nIf `.planning/config.json` missing, create it with defaults:\n```bash\nmkdir -p .planning\n```\n```json\n{\n  \"model_profile\": \"balanced\",\n  \"workflow\": {\n    \"research\": true,\n    \"plan_check\": true,\n    \"verifier\": true\n  }\n}\n```\nWrite this to `.planning/config.json`, then continue.\n\n## 2. Read Current Config\n\n```bash\ncat .planning/config.json\n```\n\nParse current values (default to `true` if not present):\n- `workflow.research` — spawn researcher during plan-phase\n- `workflow.plan_check` — spawn plan checker during plan-phase\n- `workflow.verifier` — spawn verifier during execute-phase\n- `model_profile` — which model each agent uses (default: `balanced`)\n- `git.branching_strategy` — branching approach (default: `\"none\"`)\n\n## 3. Present Settings\n\nUse AskUserQuestion with current values shown:\n\n```\nAskUserQuestion([\n  {\n    question: \"Which model profile for agents?\",\n    header: \"Model\",\n    multiSelect: false,\n    options: [\n      { label: \"Quality\", description: \"Opus everywhere except verification (highest cost)\" },\n      { label: \"Balanced (Recommended)\", description: \"Opus for planning, Sonnet for execution/verification\" },\n      { label: \"Budget\", description: \"Sonnet for writing, Haiku for research/verification (lowest cost)\" }\n    ]\n  },\n  {\n    question: \"Spawn Plan Researcher? (researches domain before planning)\",\n    header: \"Research\",\n    multiSelect: false,\n    options: [\n      { label: \"Yes\", description: \"Research phase goals before planning\" },\n      { label: \"No\", description: \"Skip research, plan directly\" }\n    ]\n  },\n  {\n    question: \"Spawn Plan Checker? (verifies plans before execution)\",\n    header: \"Plan Check\",\n    multiSelect: false,\n    options: [\n      { label: \"Yes\", description: \"Verify plans meet phase goals\" },\n      { label: \"No\", description: \"Skip plan verification\" }\n    ]\n  },\n  {\n    question: \"Spawn Execution Verifier? (verifies phase completion)\",\n    header: \"Verifier\",\n    multiSelect: false,\n    options: [\n      { label: \"Yes\", description: \"Verify must-haves after execution\" },\n      { label: \"No\", description: \"Skip post-execution verification\" }\n    ]\n  },\n  {\n    question: \"Git branching strategy?\",\n    header: \"Branching\",\n    multiSelect: false,\n    options: [\n      { label: \"None (Recommended)\", description: \"Commit directly to current branch\" },\n      { label: \"Per Phase\", description: \"Create branch for each phase (gsd/phase-{N}-{name})\" },\n      { label: \"Per Milestone\", description: \"Create branch for entire milestone (gsd/{version}-{name})\" }\n    ]\n  }\n])\n```\n\n**Pre-select based on current config values.**\n\n## 4. Update Config\n\nMerge new settings into existing config.json:\n\n```json\n{\n  ...existing_config,\n  \"model_profile\": \"quality\" | \"balanced\" | \"budget\",\n  \"workflow\": {\n    \"research\": true/false,\n    \"plan_check\": true/false,\n    \"verifier\": true/false\n  },\n  \"git\": {\n    \"branching_strategy\": \"none\" | \"phase\" | \"milestone\"\n  }\n}\n```\n\nWrite updated config to `.planning/config.json`.\n\n## 5. Confirm Changes\n\nDisplay:\n\n```\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n GSD ► SETTINGS UPDATED\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n\n| Setting              | Value |\n|----------------------|-------|\n| Model Profile        | {quality/balanced/budget} |\n| Plan Researcher      | {On/Off} |\n| Plan Checker         | {On/Off} |\n| Execution Verifier   | {On/Off} |\n| Git Branching        | {None/Per Phase/Per Milestone} |\n\nThese settings apply to future /gsd:plan-phase and /gsd:execute-phase runs.\n\nQuick commands:\n- /gsd:set-profile <profile> — switch model profile\n- /gsd:plan-phase --research — force research\n- /gsd:plan-phase --skip-research — skip research\n- /gsd:plan-phase --skip-verify — skip plan check\n```\n\n</process>\n\n<success_criteria>\n- [ ] Current config read\n- [ ] User presented with 5 settings (profile + 3 workflow toggles + git branching)\n- [ ] Config updated with model_profile, workflow, and git sections\n- [ ] Changes confirmed to user\n</success_criteria>"
