---
phase: 01-engine-task-bus
plan: 06
type: execute
wave: 4
depends_on: ["01-05"]
files_modified:
  - src/dashboard/frontend/src/pages/DashboardPage.tsx
  - src/dashboard/frontend/src/components/dashboard/ActiveTasksCard.tsx
  - src/dashboard/frontend/src/components/dashboard/RecentSessionsCard.tsx
  - src/dashboard/frontend/src/components/dashboard/ProjectHealthCard.tsx
  - src/dashboard/frontend/src/components/layout/Sidebar.tsx
autonomous: false

must_haves:
  truths:
    - "Dashboard shows active tasks count and quick access"
    - "Dashboard shows recent conversations with session titles"
    - "Dashboard shows project health grade"
    - "Sidebar shows active session count and quick-start button"
    - "Full integration works: dashboard → chat → tasks → governance"
  artifacts:
    - path: "src/dashboard/frontend/src/pages/DashboardPage.tsx"
      provides: "Dashboard overview with 3 summary cards"
      min_lines: 60
    - path: "src/dashboard/frontend/src/components/dashboard/ActiveTasksCard.tsx"
      provides: "Active tasks summary card with task list preview"
      min_lines: 40
    - path: "src/dashboard/frontend/src/components/dashboard/RecentSessionsCard.tsx"
      provides: "Recent sessions card with session titles and times"
      min_lines: 40
    - path: "src/dashboard/frontend/src/components/dashboard/ProjectHealthCard.tsx"
      provides: "Project health card with code grade"
      min_lines: 30
  key_links:
    - from: "src/dashboard/frontend/src/pages/DashboardPage.tsx"
      to: "src/dashboard/frontend/src/hooks/useTasks.ts"
      via: "useGovernance + useTasks for dashboard data"
      pattern: "useGovernance|useTasks|useSessions"
    - from: "src/dashboard/frontend/src/components/dashboard/ActiveTasksCard.tsx"
      to: "/tasks"
      via: "Link navigation to tasks page"
      pattern: "Link.*tasks|navigate.*tasks"
    - from: "src/dashboard/frontend/src/components/dashboard/RecentSessionsCard.tsx"
      to: "/chat"
      via: "Link navigation to chat sessions"
      pattern: "Link.*chat|navigate.*chat"
---

<objective>
Flesh out the dashboard landing page and verify full integration across all surfaces.

Purpose: The dashboard is the landing page per user decision. It needs to show a meaningful overview: active tasks, recent conversations, project health. This plan also includes a human-verify checkpoint to confirm the full Phase 1 integration works end-to-end.

Output: Rich dashboard page with summary cards, sidebar polish, full integration checkpoint.
</objective>

<execution_context>
@/Users/apple/.config/opencode/get-shit-done/workflows/execute-plan.md
@/Users/apple/.config/opencode/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-engine-task-bus/01-RESEARCH.md
@.planning/phases/01-engine-task-bus/01-05-SUMMARY.md
@src/dashboard/frontend/src/pages/DashboardPage.tsx
@src/dashboard/frontend/src/components/layout/Sidebar.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build Dashboard Cards + Sidebar Polish</name>
  <files>src/dashboard/frontend/src/components/dashboard/ActiveTasksCard.tsx, src/dashboard/frontend/src/components/dashboard/RecentSessionsCard.tsx, src/dashboard/frontend/src/components/dashboard/ProjectHealthCard.tsx, src/dashboard/frontend/src/pages/DashboardPage.tsx, src/dashboard/frontend/src/components/layout/Sidebar.tsx</files>
  <action>
**Create `src/dashboard/frontend/src/components/dashboard/ActiveTasksCard.tsx`:**
Summary card using shadcn Card component:
- Header: "Active Tasks" with CheckSquare icon
- Count badge: number of active/in-progress tasks
- Preview list: top 3 active tasks (name + status badge), truncated
- "View all" link to `/tasks`
- Empty state: "No active tasks" with subtle text
- Uses `useTasks()` hook

**Create `src/dashboard/frontend/src/components/dashboard/RecentSessionsCard.tsx`:**
- Header: "Recent Conversations" with MessageSquare icon
- Count: total session count
- Preview list: top 5 recent sessions (title + relative time), sorted by `time.updated`
- Each session clickable → navigates to `/chat/:id`
- "New Chat" quick-start button
- Uses `useSessions()` hook

**Create `src/dashboard/frontend/src/components/dashboard/ProjectHealthCard.tsx`:**
- Header: "Project Health" with Activity icon
- Health grade (A-F) — fetch from `/api/health` if available, or show "—" if not scanned
- Stats: file count, LOC, issue count
- Grade renders as large letter with color (A=green, B=blue, C=yellow, D=orange, F=red)
- "Run scan" button (placeholder for Phase 1)

**Update `src/dashboard/frontend/src/pages/DashboardPage.tsx`:**
Replace placeholders with real cards:
- Grid layout: 3 columns on large screens, 1 on mobile
- Cards: ActiveTasksCard, RecentSessionsCard, ProjectHealthCard
- Welcome header: "Welcome to iDumb" with subtitle
- Below cards: quick actions row (buttons for "New Chat", "View Tasks", "Run Scan")

**Update Sidebar:**
- Add session count badge next to "Chat" nav item (shows number of active sessions)
- Add "Quick Chat" button at bottom of sidebar (creates session and navigates to it)
- Polish: active nav item gets blue-500 left border, not just background change
  </action>
  <verify>
`cd src/dashboard/frontend && npm run build` succeeds. Dashboard shows three cards with real data or graceful empty states. Sidebar shows session count badge.
  </verify>
  <done>
Dashboard landing page shows active tasks, recent conversations, and project health with real data from governance + session APIs. Sidebar polished with count badges and quick actions.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Full Phase 1 Integration Verification</name>
  <files>N/A — verification checkpoint, no files modified</files>
  <action>
Human verification checkpoint. Present the following verification steps to the user:

**What was built:** Complete Phase 1 web application — OpenCode engine integration, chat with streaming, task management, governance visibility, multi-agent delegation, and dashboard overview.

**How to verify:**
1. Start the application: `cd src/dashboard && npm run dev`
2. Open browser at `http://localhost:3001`
3. Dashboard: Landing page shows three summary cards with real data or graceful empty states
4. Chat: Navigate to `/chat`, create session, type message, see structured streaming response
5. Tasks: Navigate to `/tasks`, see task sidebar with hierarchy
6. Governance: Bar at top shows correct state, color changes based on active task
7. Cross-surface: Dashboard → Chat → Tasks → back to Dashboard works

Wait for user to type "approved" or describe issues.
  </action>
  <verify>User confirms "approved" or provides issue list for iteration</verify>
  <done>All 7 verification areas confirmed working by human tester. Phase 1 integration validated end-to-end.</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` — zero errors across entire project
2. `npm test` — 814 assertions still pass (no regressions in plugin code)
3. `cd src/dashboard/frontend && npm run build` — Vite build succeeds
4. Full integration test: dashboard → chat → tasks → governance all functional
5. Responsive layout: works on desktop and mobile viewports
</verification>

<success_criteria>
- Dashboard-first landing page with meaningful overview cards per user decision
- Full Phase 1 integration verified by human
- All surfaces connected: dashboard ↔ chat ↔ tasks ↔ governance
- No TypeScript errors, no test regressions
- Ready for Phase 2 (context garden, knowledge flows)
</success_criteria>

<output>
After completion, create `.planning/phases/01-engine-task-bus/01-06-SUMMARY.md`
</output>
